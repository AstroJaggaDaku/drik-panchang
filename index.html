<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<title>51Kalibari Swiss Panchang</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Inter,system-ui;
  background:radial-gradient(circle at top,#1c2440,#06070d 80%);
  color:#f6f7fb;
}
.container{
  max-width:1150px;
  margin:40px auto;
  padding:20px;
}
.card{
  background:linear-gradient(160deg,#141a35,#1e2650);
  border-radius:22px;
  padding:30px;
  box-shadow:0 0 60px rgba(0,0,0,.7);
}
.header{
  text-align:center;
  margin-bottom:25px;
}
.header h1{
  color:#ffd580;
  margin:0;
  font-size:30px;
}
.sub{
  font-size:14px;
  color:#aab0ff;
  margin-top:6px;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:18px;
}
.block{
  background:#0d1228;
  border-radius:16px;
  padding:18px;
  box-shadow:0 6px 16px rgba(0,0,0,.4);
}
.label{
  color:#aab0ff;
  font-size:13px;
}
.value{
  font-size:18px;
  font-weight:600;
  margin-top:6px;
  color:#fff;
}
.footer{
  margin-top:30px;
  text-align:center;
  color:#999;
  font-size:13px;
  line-height:1.6;
}
</style>
</head>

<body>
<div class="container">
  <div class="card">
    <div class="header">
      <h1>ðŸ”® 51Kalibari Swiss Panchang</h1>
      <div id="vedicDate" class="sub"></div>
    </div>

    <div id="grid" class="grid"></div>

    <div class="footer">
      Â© 51Kalibari.com â€¢ Panchang Engine by Swiss Ephemeris (Lahiri)<br>
      Curated by <b>Astrologer Joydev Sastri</b>
    </div>
  </div>
</div>

<script>
fetch("/api/panchang")
.then(r => r.json())
.then(data => {

  const p = data.panchang;

  /* ðŸ”¥ AstroSage-style Civil Date Resolver */
  const today = new Date();
  const apiDate = new Date(p.date);

  if (apiDate.getDate() !== today.getDate()) {
    p.date = today.toISOString().slice(0,10);
  }

  document.getElementById("vedicDate").innerHTML =
    "ðŸ“… " + today.toLocaleDateString("en-IN",{
      weekday:"long",day:"numeric",month:"long",year:"numeric"
    }) + " â€¢ Vedic Panchang";

  const g = document.getElementById("grid");

  function box(label,val){
    return `<div class="block">
      <div class="label">${label}</div>
      <div class="value">${val}</div>
    </div>`;
  }

  g.innerHTML = `
    ${box("Tithi",p.lunar.tithi)}
    ${box("Tithi Ends",p.lunar.tithi_end)}
    ${box("Nakshatra",p.lunar.nakshatra)}
    ${box("Nakshatra Ends",p.lunar.nakshatra_end)}
    ${box("Yoga",p.lunar.yoga)}
    ${box("Yoga Ends",p.lunar.yoga_end)}
    ${box("Karana",p.lunar.karana)}
    ${box("Paksha",p.lunar.paksha)}

    ${box("Sunrise",p.sun.sunrise)}
    ${box("Sunset",p.sun.sunset)}
    ${box("Moon Sign",p.moon.sign)}
    ${box("Moonrise",p.moon.moonrise || "â€”")}
    ${box("Moonset",p.moon.moonset || "â€”")}

    ${box("Amanta Month",p.calendar.amanta_month)}
    ${box("Purnimanta Month",p.calendar.purnimanta_month)}
    ${box("Ritu",p.calendar.ritu)}

    ${box("Rahu Kalam",p.muhurta.rahu_kalam)}
    ${box("Yamaganda",p.muhurta.yamaganda)}
    ${box("Gulika",p.muhurta.gulika)}
    ${box("Abhijit",p.muhurta.abhijit)}
  `;
});
</script>
</body>
</html>
